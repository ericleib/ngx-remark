
<!-- 
  For each child, display its custom template or default one.
  Tracking by index means that DOM elements are reused even when the node type and content is different.
  Changes should still be reflected because of the @Input() node binding.
 -->
@for (child of children(); track $index) {
  <ng-container *ngTemplateOutlet="templates()[child.type] ?? defaultTpl; context: { $implicit: child , parent: node()}">
  </ng-container>
}

<ng-template #defaultTpl let-child>
  <b>Unknown node type: {{ child.type }}</b>
</ng-template>
